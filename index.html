<!doctype html>
<html lang="en">

<head>
<meta charset="utf-8">

<title>前端调试</title>

<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
<meta name="author" content="Hakim El Hattab">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="css/reveal.css">
<link rel="stylesheet" href="css/theme/black.css" id="theme">

<!-- Theme used for syntax highlighting of code -->
<link rel="stylesheet" href="lib/css/zenburn.css">

<!-- Printing and PDF exports -->
<script>
var link = document.createElement( 'link' );
link.rel = 'stylesheet';
link.type = 'text/css';
link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
document.getElementsByTagName( 'head' )[0].appendChild( link );
</script>

<!--[if lt IE 9]>
<script src="lib/js/html5shiv.js"></script>
<![endif]-->

<style>
.tl{
	text-align: left;
}
.reveal h2{
	text-transform: none;
}
</style>
</head>

<body>
<div class="reveal">
<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<section>
	<h1>前端调试</h1>
	<p>
		<small>
			<a target="_blank" href="http://weibo.com/19266593">@Tab_Space</a>
			|
			<a target="_blank" href="https://github.com/TabSpace">github.com/tabspace</a>
		</small>
	</p>
</section>

<section>
	<h2>先介绍一个代码界的传奇前辈</h2>
	<div style="width: 40%; overflow: auto; height: 80vh; float: left;">
		<img src="images/jeafdean.jpg" style="width: 100%; max-height: none;" />
	</div>
	<ul style="width:50%; overflow:hidden; float:right;">
		<li>Google传奇工程师</li>
		<li style="margin-top: 20px;">关于Jeff Dean的事实节选</li>
		<li class="fragment" style="margin-top: 20px;">编译器不会向Jeff Dean给出警告的，Jeff Dean会给编译器警告的</li>
		<li class="fragment" style="margin-top: 20px;">很遗憾我不是他</li>
		<li class="fragment" style="margin-top: 20px;">从入坑至今我一直在改BUG</li>
	</ul>
</section>

<section>
	<h2>回味当年</h2>
	<p>最熟悉的那个alert</p>
	<ul>
		<li>它会中断JS的执行</li>
		<li>JS是单线程！</li>
		<li>面对没有头绪的上万行代码怎么办？</li>
	</ul>
</section>

<section>
	<h2>二分调试</h2>
	<ul>
		<li>每次只留一半可执行代码</li>
		<li>代码正常工作，就放出来一半</li>
		<li>代码工作异常，就再隐藏一半</li>
		<li>Math.pow(2, 14) === 16384</li>
		<li>简单原始粗暴有效</li>
	</ul>
</section>

<section>
	<h2>THE END</h2>
	<p>这就是老夫行走天下多年的江湖经验</p>
	<img src="images/jquery.jpg" />
</section>

<section>
	<h2>开个冷玩笑……</h2>
</section>

<section>
	<h2>感谢 chrome</h2>
	<p><a href="https://developer.chrome.com/devtools">https://developer.chrome.com/devtools</a></p>
	<img src="images/devtools.jpg" />
</section>

<section>
	<h2>基本调试流程</h2>
	<ul>
		<li>配置调试环境确保 bug 重现</li>
		<li>使用 chrome 调试确认业务逻辑是否存在问题</li>
		<li>确认是否为数据问题(接口返回数据错误)</li>
		<li>使用相同环境浏览器，调试浏览器兼容性问题</li>
		<li>确认是否为环境配置问题(windows补丁之类)</li>
	</ul>
</section>

<section>
	<h2>日志调试</h2>
	<p>console.log</p>
</section>

<section>
	<h2>console.dir</h2>
	<img src="images/console_dir.jpg" />
</section>

<section>
	<h2>console.time</h2>
	<img src="images/console_time.jpg" />
</section>

<section>
	<h2>console.group</h2>
	<img src="images/console_group.jpg" />
</section>

<section>
	<h2>console.table</h2>
	<img src="images/console_table.jpg" />
</section>

<section>
	<h2>日志调试经验谈</h2>
	<ul>
		<li>适用于绝大多数情况</li>
		<li>添加前缀，指明调用位置</li>
		<li>一次性添加多个关键点日志</li>
		<li>不要用注释保留调试代码，代码清洁很重要</li>
	</ul>
</section>

<section>
	<h2>断点调试</h2>
</section>

<section>
	<h2>debugger;</h2>
	<p style="font-size: 28px;">调用任何一个可用的调试器</p>
	<p style="font-size: 28px;">如果没有调试器可用,则该语句没有任何效果</p>
	<img src="images/debugger.jpg" />
</section>

<section>
	<h2>breakpoint</h2>
	<img src="images/breakpoint.jpg" />
</section>

<section>
	<h2>变量监视</h2>
	<img src="images/breakpoint-var.jpg" />
</section>

<section>
	<h2>单步调试</h2>
	<ul>
		<li>step over next function call</li>
		<li>跳过接下来一整个函数执行</li>
		<li>你认为接下来的这个函数是没问题的</li>
		<li style="margin-top: 20px;">step into next function call</li>
		<li>进入接下来的一个函数体</li>
		<li>你认为接下来的这个函数可能存在问题</li>
		<li style="margin-top: 20px;">step out of current function</li>
		<li>退出当前函数体</li>
		<li>你进去看了看，估计没啥问题</li>
	</ul>
</section>

<section>
	<h2>断点调试经验谈</h2>
	<ul>
		<li>适用于检查复杂逻辑</li>
		<li>频繁的思维打断比较消耗时间</li>
		<li>仅用于寻找问题，不用于修改代码</li>
	</ul>
</section>

<section>
	<h2>移动端调试</h2>
</section>

<section>
	<h2>模拟屏幕宽度与UA</h2>
	<img src="images/emulate.jpg" />
</section>

<section>
	<h2>配置控制台显示位置</h2>
	<img src="images/console_setting.jpg" />
</section>

<section>
	<h2>自定义UA与屏幕宽度</h2>
	<img src="images/setting_emulate.jpg" />
</section>

<section>
	<h2>网络状况模拟</h2>
	<img src="images/throtting.jpg" />
</section>

<section>
	<h2>控制台模拟</h2>
	<ul style="width: 60%; float: left; list-style: none;">
		<li><a href="https://github.com/WechatFE/vConsole" target="_blank">WechatFE/vConsole</a></li>
		<li><a href="https://www.npmjs.com/package/vconsole-webpack-plugin" target="_blank">vconsole-webpack-plugin</a></li>
		<li><img src="images/webpack-vconsole.jpg" /></li>
	</ul>
	<img src="images/vconsole.png" style="width: 30%; float: right;" />
</section>

<section>
	<h2>配置调试环境</h2>
	<p>可重现的 bug 才是可以调试的 bug</p>
</section>

<section>
	<h2>虚拟机</h2>
</section>

<section>
	<h2>HOSTS/DNS</h2>
</section>

<section>
	<h2>配置hosts</h2>
	<ul>
		<li>c:/windows/system32/drivers/etc/hosts</li>
		<li>/etc/hosts</li>
		<li>如果hosts未生效，清除dns缓存</li>
		<li>ipconfig /flushdns</li>
		<li>用 ping 命令检测</li>
	</ul>
</section>

<section>
	<h2>chrome 查看每个请求的 dns 解析</h2>
	<img src="images/chrome-network-dns.jpg" />
</section>

<section>
	<h2>chrome 清除 DNS 缓存</h2>
	<p><a href="chrome://net-internals/#dns" target="_blank">chrome://net-internals/#dns</a></p>
	<img src="images/chrome-dns-clean.jpg" />
</section>

<section>
	<h2>chrome 查看每个请求的 dns 解析</h2>
	<img src="images/chrome-network-dns.jpg" />
</section>

<section>
	<h2>hosts 切换工具</h2>
	<p>for windows</p>
	<p><a href="https://chrome.google.com/webstore/detail/mfoaclfeiefiehgaojbmncmefhdnikeg?utm_source=chrome-app-launcher-info-dialog" target="_blank">hostadmin app</a></p>
	<img src="images/hostadmin-app.png" />
	<img src="images/hostadmin-config.png" />
</section>

<section>
	<h2>hosts 切换工具</h2>
	<p>for mac</p>
	<p><a href="https://h.ihosts.toolinbox.net/cn/" target="_blank">ihosts</a></p>
	<img src="images/ihosts-config.jpg" style="width: 60%; vertical-align: top;" />
	<img src="images/ihosts.jpg" style="width: 30%; vertical-align: top;"/>
</section>

<section>
	<h2>问题</h2>
	<ul>
		<li>线上静态文件往往在多个域名</li>
		<li>不方便对所有文件配置测试服务器</li>
		<li>手机无法配置 hosts</li>
	</ul>
</section>

<section>
	<h2>代理调试</h2>
</section>

<section>
	<h2>什么是代理？</h2>
	<ul>
		<li class="fragment">你想认识 TA，TA 收到各种小纸条并积极回应，这叫“web 服务”</li>
		<li class="fragment">你想传纸条给 TA，需要别人帮你传纸条，这叫 “路由”</li>
		<li class="fragment">TA 不知道你让你的朋友 A 审查你给 TA 的纸条，这叫“正向代理”</li>
		<li class="fragment">你不知道 TA 让 TA 的朋友 B 审查 TA 接收传出的纸条，这叫“反向代理”</li>
		<li class="fragment">你的纸条必须经过 C，但你和 TA 都不知道 C 在偷偷审查纸条，这叫“透明代理”</li>
		<li class="fragment">TA 要求凡是你传来的纸条，A 都要打开处理一下，你被匹配了“代理规则”</li>
		<li class="fragment">A, B, C 能做什么？细思恐极</li>
	</ul>
</section>

<section>
	<h2>本地默认代理配置</h2>
	<div style="overflow: auto; max-height: 550px;">
		<img src="images/proxy-ie.jpg" style="display:block; width: 1200px; max-width: 1200px; max-height: 1200px; margin: 0;" />
	</div>
</section>

<section>
	<h2>chrome插件切换代理</h2>
	<p><a href="https://github.com/FelisCatus/SwitchyOmega" target="_blank">SwitchyOmega</a></p>
	<img src="images/proxy-switchy-chrome.jpg" />
	<img src="images/proxy-switchy-panel.jpg" />
</section>

<section>
	<h2>SwitchyOmega 代理选项配置</h2>
	<img src="images/proxy-switchy-config.jpg" />
</section>

<section>
	<h2>手机配置代理</h2>
	<img style="width: 30%;" src="images/proxy-config-android.jpeg" />
	<img style="width: 30%;" src="images/proxy-config-ios.jpeg" />
</section>

<section>
	<h2>fiddler</h2>
	<p><a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a></p>
	<img src="images/fiddler-view.jpeg" />
</section>

<section>
	<h2>fiddler 代理服务配置</h2>
	<img src="images/fiddler-view.jpeg" />
</section>

<section>
	<h2>nproxy</h2>
</section>

<section>
	<h2>anyproxy</h2>
</section>

<section>
	<h2>MOCK服务与反向代理</h2>
</section>

<section>
	<h2>如何节省调试开销?</h2>
</section>

<section>
	<h2>使用 Linter</h2>
	<ul>
		<li><a href="http://eslint.cn/" target="_blank">http://eslint.cn/</a></li>
		<li>自定义适合自己的约束规则</li>
		<li><a href="https://github.com/Gillespie59/eslint-plugin-angular" target="_blank">eslint-plugin-angular</a></li>
		<li><a href="https://github.com/SublimeLinter/SublimeLinter3" target="_blank">sublime linter</a></li>
	</ul>
</section>

<section>
	<img src="images/eslint.jpg" />
</section>

<section>
	<h2>积累 HACK</h2>
	<ul>
		<li>例子: animation 动画效果异常</li>
		<li>backface-visibility: hidden;</li>
	</ul>
</section>

<section>
	<h2>遵守规范</h2>
	<ul>
		<li>例子: 网页编码应当使用utf8</li>
		<li>㎡ 与 m²</li>
		<li>㎡: \u33a1 gbk支持</li>
		<li>²: \u00B2 gbk不支持，无法显示</li>
	</ul>
</section>

<section>
	<h2>完善手头工具</h2>
	<ul>
		<li>长期坚持，不断更新</li>
		<li>例子: 混用换行符引发的页面输出故障</li>
		<li>unix换行符 \CR</li>
		<li>windows换行符 \CR\LF</li>
	</ul>
</section>

<section>
	<h2>培养好习惯</h2>
	<ul>
		<li>让代码趋于更加合理，而不是能工作就行</li>
		<li>例子: 不要滥用 position:relative</li>
		<li>真实案例: 初始化白屏，见于 android uc 浏览器</li>
	</ul>
</section>

<section>
	<h1>THE END</h1>
	<p>
		<a target="_blank" href="https://github.com/TabSpace/reveal-FE_DEBUG">TabSpace/reveal-FE_DEBUG</a>
	</p>
</section>

</div>
</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
// More info https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
	controls: true,
	progress: true,
	history: true,
	center: true,

	allottedTime: 45 * 60 * 1000,

	transition: 'slide', // none/fade/slide/convex/concave/zoom

	// More info https://github.com/hakimel/reveal.js#dependencies
	dependencies: [
		{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
		{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
		{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
		{ src: 'plugin/zoom-js/zoom.js', async: true },
		{ src: 'plugin/notes/notes.js', async: true },
		{ src: 'plugin/elapsed-time-bar/elapsed-time-bar.js'}
	]
});
</script>

</body>
</html>